<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>AkServer Announcement</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <style>
    body {
      margin: 0;
      font-family: sans-serif;
      background: #fff;
    }

    #wrapper {
      padding: 10px 15px;
      transition: max-height 0.4s ease;
      overflow: hidden;
      max-height: 140px; /* Default collapsed height */
    }

    #toggle-btn {
      display: block;
      width: 100%;
      padding: 8px;
      text-align: center;
      background: #0078d4;
      color: white;
      border: none;
      cursor: pointer;
      font-size: 14px;
    }

    #content {
      font-size: 14px;
      line-height: 1.5em;
    }
  </style>
</head>
<body>
  <div id="wrapper">
    <div id="content">
      <p>ğŸ“¢ Welcome to AkServer! This is your professional file sync and sharing platform.</p>
      <p>ğŸ® New Feature: Now play games like Tic Tac Toe inside the app â€“ powered by GitHub Pages!</p>
      <p>ğŸš€ Tip: AkServer works fully offline with one-click HTTPS install. Stay secure, always.</p>
      <p>ğŸ› ï¸ Check for updates, features, or events right here in the announcement window.</p>
    </div>
  </div>

  <button id="toggle-btn">Show More</button>

  <script>
    const wrapper = document.getElementById("wrapper");
    const toggleBtn = document.getElementById("toggle-btn");
    let expanded = false;

    function sendHeight() {
      const height = document.body.scrollHeight;
      parent.postMessage({ type: 'akserver-iframe-height', height }, '*');
    }

    toggleBtn.onclick = () => {
      expanded = !expanded;
      wrapper.style.maxHeight = expanded ? '1000px' : '140px';
      toggleBtn.textContent = expanded ? 'Show Less' : 'Show More';
      setTimeout(sendHeight, 400); // After transition
    };

    window.onload = sendHeight;
  </script>
</body>
</html>
